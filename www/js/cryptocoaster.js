var CryptoCoaster=CryptoCoaster||{};CryptoCoaster.data={highScore:0,currentScore:0,worldLoop:0,jumpCount:0,jumpTime:0,inAir:0,activePlugins:{},gameObj:{}},CryptoCoaster.Boot=function(){},CryptoCoaster.Boot.prototype={preload:function(){this.load.image("preloaderBackground","assets/images/loading_background.png"),this.load.image("preloaderBar","assets/images/preloader-bar.png")},create:function(){this.state.start("Preload")}};CryptoCoaster.DayComplete=function(a){this.gameMenu={}},CryptoCoaster.DayComplete.prototype={create:function(){CryptoCoaster.data.currentScore||(CryptoCoaster.data.currentScore=0),CryptoCoaster.data.jackpotSound=this.game.add.audio("jackpot"),CryptoCoaster.data.jackpotSound.play(),CryptoCoaster.data.jackpotSound.loopFull(),CryptoCoaster.data.screamSound=this.game.add.audio("screams"),CryptoCoaster.data.activePlugins.particleStorm=this.game.plugins.add(Phaser.ParticleStorm),CryptoCoaster.data.gameBg=this.add.tileSprite(0,0,800,490,"gameBg"),CryptoCoaster.data.gameBg.fixedToCamera=!0,btcEmitter=this.game.add.emitter(.5*this.game.camera.width,.5*this.game.camera.height,100),btcEmitter.makeParticles("gameItems","BTC.png"),btcEmitter.minParticleSpeed.setTo(-200,-200),btcEmitter.maxParticleSpeed.setTo(200,200),btcEmitter.minParticleScale=.5,btcEmitter.maxParticleScale=1,btcEmitter.maxParticleAlpha=.5,btcEmitter.gravity=0,btcEmitter.flow(5e3,3e3,10,-1);var a=this.game.add.text(.5*this.game.camera.width,20,"Day",{stroke:"#000",strokeThickness:10,font:"70px Flea Market Finds",fill:"#7CFC00"});a.x=.5*this.game.camera.width-190,a.fixedToCamera=!0;var b=this.game.add.text(.5*this.game.camera.width,20,"Complete!!",{stroke:"#000",strokeThickness:10,font:"70px Flea Market Finds",fill:"#c90404"});b.x=.5*this.game.camera.width-70,b.fixedToCamera=!0,this.cursors=this.game.input.keyboard.createCursorKeys(),this.spaceBar=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);var c="#7CFC00",d="Congratulations on surviving the last 24 hours\n in the BTC market",e=this.game.add.text(.5*this.game.camera.width,200,d,{stroke:"#000",strokeThickness:10,font:"40px Flea Market Finds",fill:c,align:"center"});e.x=.5*this.game.camera.width-.5*e.width,e.fixedToCamera=!0;var f=this.game.add.text(.5*this.game.camera.width,320,"Score: "+CryptoCoaster.data.currentScore,{stroke:"#000",strokeThickness:10,font:"40px Flea Market Finds",fill:"#c90404"});f.x=.5*this.game.camera.width-.5*f.width,f.fixedToCamera=!0;var g=this.game.add.text(.5*this.game.camera.width,430,"Space to continue",{stroke:"#000",strokeThickness:10,font:"30px Flea Market Finds",fill:"#c90404"});g.x=.5*this.game.camera.width-.5*g.width,g.fixedToCamera=!0,this.gameMenu.shoot=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.activeSleighs=this.game.add.group(),this.sleighTimer=this.game.time.create(!1),CryptoCoaster.data.activeSleighs=this.activeSleighs,CryptoCoaster.data.gameObj=this.game,this.sleighTimer.loop(15*Phaser.Timer.SECOND,this.sleighSetup),this.sleighTimer.start(),this.sleighSetup();var h={image:"gameItems",frame:"coaster-trail.png",blendMode:"HARD_LIGHT",lifespan:{min:500,max:1e3},scale:.1,vx:{value:{min:-1,max:1}},vy:{value:{min:-2,max:.5},delta:.01,control:[{x:0,y:1},{x:1,y:.5}]},alpha:{value:1,control:[{x:0,y:0},{x:.3,y:1},{x:1,y:0}]},rotation:{value:0,delta:{min:-2,max:2}}};CryptoCoaster.data.activePlugins.particleStorm.addData("coasterTrail",h),CryptoCoaster.data.sleighEmitter=CryptoCoaster.data.activePlugins.particleStorm.createEmitter(),CryptoCoaster.data.sleighEmitter.addToWorld()},sleighSetup:function(){CryptoCoaster.data.screamSound.play();var a=CryptoCoaster.data.gameObj.add.sprite(1e3,100,"gameItems","title_coaster.png");CryptoCoaster.data.gameObj.physics.enable(a,Phaser.Physics.ARCADE),a.body.allowGravity=!1,a.body.velocity.x=-180,CryptoCoaster.data.activeSleighs.add(a)},update:function(){this.gameMenu.shoot.isDown&&this.returnToMenu(),this.activeSleighs.forEach(function(a){a.x<-300?a.kill():(CryptoCoaster.data.sleighEmitter.emit("coasterTrail",a.x+a.width-13,a.y+a.height-7),CryptoCoaster.data.sleighEmitter.emit("coasterTrail",a.x+a.width-55,a.y+a.height-7))},this),(this.cursors.up.isDown||this.spaceBar.isDown)&&this.returnToMenu()},render:function(){},returnToMenu:function(){this.state.start("MainMenu",!0)}};var CryptoCoaster=CryptoCoaster||{};CryptoCoaster.Game=function(){},CryptoCoaster.Game.prototype={preload:function(){CryptoCoaster.rnd=this.game.rnd,this.game.time.advancedTiming=!0,this.tileSize=70,CryptoCoaster.data.moonJump=0,CryptoCoaster.data.moonStatus="Ready",this.platfomHeights=!0,this.disableNews=!1,this.pointCutoff=288;var a=JSON.parse(sessionStorage.btcPrice);this.newsCount=0,this.newsDistance=0,this.newsJSON=JSON.parse(sessionStorage.newsData),this.newsJSON=this.shuffleArray(this.newsJSON);var b=a.market_data.length;if(b>this.pointCutoff)var c=b-this.pointCutoff;else var c=0;var d=a.market_data.splice(c,this.pointCutoff);this.marketData=[];for(var e=0;e<d.length;e+=7)this.marketData.push(d[e]);this.pointCutoff=this.marketData.length},create:function(){this.world.setBounds(0,0,3e3,2e3),CryptoCoaster.data.playerDead=0,CryptoCoaster.data.activePlugins.particleStorm=this.game.plugins.add(Phaser.ParticleStorm),this.backgroundlayer=this.game.add.tileSprite(0,0,800,490,"playingBg"),this.backgroundlayer.fixedToCamera=!0,this.backgroundlayer.game.world.sendToBack(this.backgroundlayer),this.tileCount=0,this.tileSize=70,this.probCliff=.4,this.probVertical=.4,this.probMoreVertical=.5,this.floorTiles=this.game.add.group(),this.floorTiles.enableBody=!0,this.newsTiles=this.game.add.group(),this.newsTiles.enableBody=!0;var a=this.game.world.height/2-this.tileSize,b={min:4,max:15,total_count:0,last_height:a,group_length:0,current_length:0,paint_platforms:1,current_price:this.marketData[0].price_usd};if(CryptoCoaster.data.currentPrice=this.marketData[0].price_usd,0==b.total_count)var c=Math.floor(Math.random()*(b.max-b.min)+b.min);for(var d=[],e=0;e<this.pointCutoff-1;){if(b.current_length<c){if(1==b.paint_platforms){var f=b.total_count*this.tileSize,g=b.last_height;newItem=this.floorTiles.create(f,g,"floor"),newItem.price_usd=this.marketData[this.tileCount],newItem.body.immovable=!0,b.total_count>8&&this.createNews(f,g)}b.current_length++}else{if(b.paint_platforms=-1*b.paint_platforms,1===b.paint_platforms){this.tileCount++,e++;var h=Math.round(this.marketData[this.tileCount-1].price_usd-this.marketData[this.tileCount].price_usd);if((0>h||h>0)&&(d.push(h),this.platfomHeights)){var i=Math.abs(h);if(35>i)var h=7*h;else if(i>=35&&50>i)var h=5*h;else if(i>=50&&75>i)var h=2*h}if(h>250)var h=250;if(-250>h)var h=-250;b.last_height=b.last_height+h}if(b.paint_platforms>0)var c=Math.floor(Math.random()*(b.max-b.min)+b.min);else var c=this.game.rnd.integerInRange(1,5);b.current_length=0}b.total_count++}var j=b.total_count*this.tileSize;if(this.world.setBounds(0,0,j,3e3),this.lastFloor=newItem,0===CryptoCoaster.data.worldLoop){CryptoCoaster.data.currentScore=0,this.runSpeed=300;var k=["To the moon!","Lambo time!","HODL tight!","Lets hunt bearwhales!","Bullish on Bitcoin..."],l=this.game.add.text(.5*this.game.camera.width,200,k[Math.floor(Math.random()*k.length)],{stroke:"#000",strokeThickness:10,font:"40px Flea Market Finds",fill:"#c90404"});l.x=.5*this.game.camera.width-.5*l.width,l.fixedToCamera=!0,this.game.time.events.add(700,function(){var a=this.game.add.tween(l);a.to({alpha:0},400,Phaser.Easing.Linear.None,!0),a.onComplete.add(function(){l.destroy()})},this)}else this.runSpeed=this.runSpeed+50,CryptoCoaster.data.worldLoop=0;this.player=this.game.add.sprite(100,800,"gameItems","1.png"),this.player.animations.add("run",["1.png","2.png","3.png","4.png","5.png","6.png","7.png"],9,!0),this.player.animations.add("explode",["explode_1.png","explode_2.png","explode_3.png","explode_4.png","explode_5.png","explode_6.png","explode_7.png"],5,!1),this.player.play("run"),this.game.physics.arcade.enable(this.player),this.player.body.gravity.y=1e3,this.player.anchor.setTo(.5,1),this.game.camera.follow(this.player),CryptoCoaster.player=this.player,this.cursors=this.game.input.keyboard.createCursorKeys(),this.moonKey=this.game.input.keyboard.addKey(Phaser.Keyboard.M),this.spaceBar=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.enterKey=this.game.input.keyboard.addKey(Phaser.Keyboard.ENTER),CryptoCoaster.data.scoreObject=this.game.add.text(20,400,"Score: "+CryptoCoaster.data.currentScore,{stroke:"#000",strokeThickness:10,font:"50px Flea Market Finds",fill:"#c90404"}),CryptoCoaster.data.scoreObject.fixedToCamera=!0,CryptoCoaster.data.moonjumpObject=this.game.add.text(20,450,"Moon Launch: Ready",{stroke:"#000",strokeThickness:10,font:"25px Flea Market Finds",fill:"#7CFC00"}),CryptoCoaster.data.moonjumpObject.fixedToCamera=!0,CryptoCoaster.data.priceObject=this.game.add.text(20,20,"Price: $"+CryptoCoaster.data.currentPrice,{stroke:"#000",strokeThickness:10,font:"50px Flea Market Finds",fill:"#7CFC00"}),CryptoCoaster.data.priceObject.fixedToCamera=!0,this.gameOverSound=this.game.add.audio("gameOver"),this.jumpSound=this.game.add.audio("jump"),this.landSound=this.game.add.audio("land"),this.moonSound=this.game.add.audio("liftOff"),this.paperSound=this.game.add.audio("paperPickup"),this.game.input.onTap.add(function(){this.playerJump()},this)},createNews:function(a,b){if(this.newsCount<this.newsJSON.length-1){var c=40,d=this.game.rnd.integerInRange(5,15);if(this.newsDistance++,this.newsDistance>5&&5===d){console.log(this.newsJSON.length),this.newsDistance=0;var e=this.newsTiles.create(a,b-c,"gameItems","newspaper.png");e.headline=this.newsJSON[this.newsCount],this.newsCount++}}},update:function(){this.player.alive&&(this.game.physics.arcade.collide(this.player,this.floorTiles,this.playerHit,null,this),this.game.physics.arcade.overlap(this.player,this.newsTiles,this.collectNews,null,this),this.moonKey.isDown&&(this.moonJump(),this.player.animations.stop("run")),(this.cursors.up.isDown||this.spaceBar.isDown)&&(this.playerJump(),this.player.animations.stop("run")),this.player.x>=this.game.world.width&&this.state.start("DayComplete",!0),this.player.y>=this.game.world.height&&(this.player.kill(),this.gameOver()),this.player.body.velocity.x>0&&(this.backgroundlayer.tilePosition.x-=.5))},playerHit:function(a,b){if(a.body.blocked.right&&(this.player.play("explode"),this.player.body.allowGravity=!1,this.player.alive=!1,this.player.body.velocity.x=0,this.player.loadTexture("gameItems","dead.png"),this.gameOver()),a.body.touching.down){if(1===CryptoCoaster.data.inAir){var c=b.price_usd,d=CryptoCoaster.data.currentPrice;if(CryptoCoaster.data.currentPrice=c.price_usd,c.price_usd<d)var e="#c90404";else var e="#7CFC00";CryptoCoaster.data.priceObject.destroy(),CryptoCoaster.data.priceObject=this.game.add.text(20,20,"Price: $"+c.price_usd,{stroke:"#000",strokeThickness:10,font:"50px Flea Market Finds",fill:e}),CryptoCoaster.data.priceObject.fixedToCamera=!0,this.landSound.play(),CryptoCoaster.data.inAir=0,this.add.tween(this.player).to({angle:0},200,"Linear",!0,0)}(this.cursors.left.isDown||this.cursors.right.isDown)&&0===CryptoCoaster.data.inAir?(this.cursors.left.isDown&&this.player.body.velocity.x>50&&(this.player.body.velocity.x=this.player.body.velocity.x-20),this.cursors.right.isDown&&(this.player.body.velocity.x=this.player.body.velocity.x+20)):this.player.body.velocity.x=this.runSpeed,this.player.play("run");var f={image:"gameItems",frame:"grass-clump.png",blendMode:"HARD_LIGHT",lifespan:{min:100,max:200},scale:.1,vx:{value:{min:-10,max:.5}},vy:{value:{min:-7,max:0},delta:.01,control:[{x:0,y:1},{x:1,y:.5}]},alpha:{value:1,control:[{x:0,y:0},{x:.3,y:1},{x:1,y:0}]},rotation:{value:0,delta:{min:-2,max:2}}};CryptoCoaster.data.activePlugins.particleStorm.addData("dirtSpray",f),CryptoCoaster.data.dirtSprayEmitter=CryptoCoaster.data.activePlugins.particleStorm.createEmitter(),CryptoCoaster.data.dirtSprayEmitter.addToWorld(),CryptoCoaster.data.dirtSprayEmitter.emit("dirtSpray",this.player.x+20,this.player.y)}},collectNews:function(a,b){if(!this.disableNews){CryptoCoaster.data.currentScore+=50,CryptoCoaster.data.scoreObject.kill(),CryptoCoaster.data.scoreObject=this.game.add.text(20,400,"Score: "+CryptoCoaster.data.currentScore,{stroke:"#000",strokeThickness:10,font:"50px Flea Market Finds",fill:"#c90404"}),CryptoCoaster.data.scoreObject.fixedToCamera=!0;var c=this;this.openNews(b.headline),this.game.paused=!0,window.onkeydown=function(){if(c.enterKey.isDown){var a=window.open(b.headline.link,"_blank");a.focus()}c.spaceBar.isDown&&(CryptoCoaster.data.newspaperBg.destroy(),CryptoCoaster.data.newsHeadline.destroy(),CryptoCoaster.data.newsBody.destroy(),CryptoCoaster.data.newsCont.destroy(),CryptoCoaster.data.newsRead.destroy(),b.destroy(),c.game.paused=!1)}}},openNews:function(a){CryptoCoaster.data.newspaperBg=this.add.tileSprite(0,0,800,490,"gameItems","headlines.png"),CryptoCoaster.data.newspaperBg.fixedToCamera=!0;var b={font:"20px Arial",fill:"#000",align:"center",boundsAlignH:"left",boundsAlignV:"top",wordWrap:!0,wordWrapWidth:600};CryptoCoaster.data.newsHeadline=this.game.add.text(50,150,a.title,b),CryptoCoaster.data.newsHeadline.fixedToCamera=!0,b.font="18px Arial",CryptoCoaster.data.newsRead=this.game.add.text(50,330,"Press enter to read more",b),CryptoCoaster.data.newsRead.x=this.game.camera.width/2-CryptoCoaster.data.newsRead.width/2,CryptoCoaster.data.newsRead.fixedToCamera=!0,CryptoCoaster.data.newsCont=this.game.add.text(50,360,"Space to continue",b),CryptoCoaster.data.newsCont.x=this.game.camera.width/2-CryptoCoaster.data.newsCont.width/2,CryptoCoaster.data.newsCont.fixedToCamera=!0,b.font="16px Arial",b.align="left";var c=a.description,c=c.replace(/<(?:.|\n)*?>/gm,""),d=function(a,b){var c,d;if(c=a.split(""),c.length>b){for(d=c.length-1;d>-1;--d)if(d>b)c.length=d;else if(" "===c[d]){c.length=d;break}c.push("...")}return c.join("")},c=d(c,300);CryptoCoaster.data.newsBody=this.game.add.text(50,200,c,b),CryptoCoaster.data.newsBody.fixedToCamera=!0},gameOver:function(){if(1!==CryptoCoaster.data.playerDead){if(CryptoCoaster.data.playerDead=1,this.gameOverSound.play(),CryptoCoaster.data.currentScore>CryptoCoaster.data.highScore){CryptoCoaster.data.highScore=CryptoCoaster.data.currentScore;var a={highScore:CryptoCoaster.data.currentScore};localStorage.high_score=JSON.stringify(a)}CryptoCoaster.data.jumpCount=0;var b=["Crashed to zero!","China actually bans bitcoin!","Tulip mania is over :-(","Shorted by whales...","Wiped out by weak hands.","Position liquidated","Private key lost","Mempool full"],c=this.game.add.text(.5*this.game.camera.width,120,b[Math.floor(Math.random()*b.length)],{stroke:"#000",strokeThickness:10,font:"50px Flea Market Finds",fill:"#c90404"});c.x=.5*this.game.camera.width-.5*c.width,c.fixedToCamera=!0,this.game.time.events.add(3500,function(){var a=this.game.add.tween(c);a.to({alpha:0},2e3,Phaser.Easing.Linear.None,!0),a.onComplete.add(function(){c.destroy()})},this),this.game.time.events.add(6e3,this.mainMenu,this)}},mainMenu:function(){this.game.state.start("MainMenu",!0)},playerJump:function(){1!==CryptoCoaster.data.playerDead&&(this.player.body.touching.down?(this.player.body.velocity.y-=700,CryptoCoaster.data.jumpCount=1,CryptoCoaster.data.jumpTime=this.game.time.time,CryptoCoaster.data.inAir=1,this.add.tween(this.player).to({angle:-15},200,"Linear",!0,0),this.jumpSound.play()):1==CryptoCoaster.data.jumpCount&&this.game.time.time-CryptoCoaster.data.jumpTime>1e3&&(this.player.body.velocity.y-=700,CryptoCoaster.data.jumpCount=0,this.jumpSound.play()))},moonJump:function(){if(1!==CryptoCoaster.data.playerDead&&this.player.body.touching.down&&0===CryptoCoaster.data.moonJump){this.moonSound.play(),this.player.body.velocity.y-=1500,CryptoCoaster.data.moonJump=this.game.time.time,CryptoCoaster.data.inAir=1;this.game.time.create();CryptoCoaster.data.moonTimer=this.game.time.events.add(10*Phaser.Timer.SECOND,function(){CryptoCoaster.data.moonJump=0,this.toggleMoonStatus("Moon Launch: Ready","#7CFC00")},this),this.toggleMoonStatus("Moon Launch: Thrusters Charging","#c90404"),this.add.tween(this.player).to({angle:-45},200,"Linear",!0,0)}},shuffleArray:function(a){for(var b=a.length;b>0;){var c=Math.floor(Math.random()*b);b--;var d=a[b];a[b]=a[c],a[c]=d}return a},toggleMoonStatus:function(a,b){CryptoCoaster.data.moonjumpObject.destroy(),CryptoCoaster.data.moonjumpObject=this.game.add.text(20,450,a,{stroke:"#000",strokeThickness:10,font:"25px Flea Market Finds",fill:b}),CryptoCoaster.data.moonjumpObject.fixedToCamera=!0},render:function(){}};CryptoCoaster.MainMenu=function(a){this.gameMenu={}},CryptoCoaster.MainMenu.prototype={create:function(){if(sessionStorage.btcPrice||(sessionStorage.btcPrice=JSON.stringify(this.cache.getJSON("btcprice"))),!sessionStorage.newsData){var a=this.cache.getJSON("coindeskNews"),b=this.cache.getJSON("bitcoinistNews"),c=a.items.concat(b.items);sessionStorage.newsData=JSON.stringify(c)}var d=JSON.parse(sessionStorage.btcPrice),e=localStorage.high_score;e&&(e=JSON.parse(e),CryptoCoaster.data.highScore=e.highScore),CryptoCoaster.data.screamSound=this.game.add.audio("screams"),CryptoCoaster.data.activePlugins.particleStorm=this.game.plugins.add(Phaser.ParticleStorm),CryptoCoaster.data.gameBg=this.add.tileSprite(0,0,800,490,"gameBg"),CryptoCoaster.data.gameBg.fixedToCamera=!0;var f=this.game.add.text(.5*this.game.camera.width,20,"Crypto",{stroke:"#000",strokeThickness:10,font:"70px Flea Market Finds",fill:"#7CFC00"});f.x=.5*this.game.camera.width-220,f.fixedToCamera=!0;var g=this.game.add.text(.5*this.game.camera.width,20,"Coaster",{stroke:"#000",strokeThickness:10,font:"70px Flea Market Finds",fill:"#c90404"});g.x=.5*this.game.camera.width-20,g.fixedToCamera=!0,this.cursors=this.game.input.keyboard.createCursorKeys(),this.spaceBar=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR);var h=d.market_data[d.market_data.length-1];if(h.percent_change_24h<0)var i="#c90404";else var i="#7CFC00";var j="Current Price: $"+h.price_usd+"\r\nPercent Change 24h: "+h.percent_change_24h+"%",k=this.game.add.text(.5*this.game.camera.width,200,j,{stroke:"#000",strokeThickness:10,font:"40px Flea Market Finds",fill:i});k.x=.5*this.game.camera.width-.5*k.width,k.fixedToCamera=!0;var l=this.game.add.text(.5*this.game.camera.width,320,"Highscore: "+CryptoCoaster.data.highScore,{stroke:"#000",strokeThickness:10,font:"40px Flea Market Finds",fill:i});l.x=.5*this.game.camera.width-.5*l.width,l.fixedToCamera=!0,this.gameMenu.shoot=this.game.input.keyboard.addKey(Phaser.Keyboard.SPACEBAR),this.activeSleighs=this.game.add.group(),this.sleighTimer=this.game.time.create(!1),CryptoCoaster.data.activeSleighs=this.activeSleighs,CryptoCoaster.data.gameObj=this.game,this.sleighTimer.loop(15*Phaser.Timer.SECOND,this.sleighSetup),this.sleighTimer.start(),this.sleighSetup();var m={image:"gameItems",frame:"coaster-trail.png",blendMode:"HARD_LIGHT",lifespan:{min:500,max:1e3},scale:.1,vx:{value:{min:-1,max:1}},vy:{value:{min:-2,max:.5},delta:.01,control:[{x:0,y:1},{x:1,y:.5}]},alpha:{value:1,control:[{x:0,y:0},{x:.3,y:1},{x:1,y:0}]},rotation:{value:0,delta:{min:-2,max:2}}};CryptoCoaster.data.activePlugins.particleStorm.addData("coasterTrail",m),CryptoCoaster.data.sleighEmitter=CryptoCoaster.data.activePlugins.particleStorm.createEmitter(),CryptoCoaster.data.sleighEmitter.addToWorld();var n=this.game.add.text(.5*this.game.camera.width,430,"Space to continue",{stroke:"#000",strokeThickness:10,font:"30px Flea Market Finds",fill:"#c90404"});n.x=.5*this.game.camera.width-.5*n.width,n.fixedToCamera=!0},sleighSetup:function(){CryptoCoaster.data.screamSound.play();var a=CryptoCoaster.data.gameObj.add.sprite(1e3,100,"gameItems","title_coaster.png");CryptoCoaster.data.gameObj.physics.enable(a,Phaser.Physics.ARCADE),a.body.allowGravity=!1,a.body.velocity.x=-180,CryptoCoaster.data.activeSleighs.add(a)},update:function(){this.gameMenu.shoot.isDown&&this.startGame(),this.activeSleighs.forEach(function(a){a.x<-300?a.kill():(CryptoCoaster.data.sleighEmitter.emit("coasterTrail",a.x+a.width-13,a.y+a.height-7),CryptoCoaster.data.sleighEmitter.emit("coasterTrail",a.x+a.width-55,a.y+a.height-7))},this),(this.cursors.up.isDown||this.spaceBar.isDown)&&this.startGame()},render:function(){},startGame:function(){this.state.start("Game",!0)}};var CryptoCoaster=CryptoCoaster||{};CryptoCoaster.Preload=function(){},CryptoCoaster.Preload.prototype={preload:function(){this.background=this.add.sprite(0,0,"preloaderBackground"),this.background.x=.5*this.camera.width-.5*this.background.width,this.preloadBar=this.add.sprite(this.game.world.centerX,this.game.world.centerY+200,"preloaderBar"),this.preloadBar.anchor.setTo(.5),this.preloadBar.scale.setTo(3),this.load.setPreloadSprite(this.preloadBar),this.load.atlas("gameItems","assets/images/game-items.png","assets/images/game-items.json"),this.load.image("floor","assets/images/floor.png"),this.load.image("gameBg","assets/images/game_background.jpg"),this.load.image("playingBg","assets/images/theme_park_bg.png"),sessionStorage.btcPrice||this.load.json("btcprice","https://cryptocoins.anthony-mills.com/currency/btc"),sessionStorage.newsdata||(this.load.json("coindeskNews","https://api.rss2json.com/v1/api.json?rss_url=https%3A%2F%2Ffeeds.feedburner.com%2FCoinDesk"),this.load.json("bitcoinistNews","https://api.rss2json.com/v1/api.json?rss_url=http%3A%2F%2Fbitcoinist.com%2Ffeed%2F")),this.load.audio("gameOver",["assets/audio/game-over.ogg","assets/audio/game-over.mp3"]),this.load.audio("jump",["assets/audio/jump.ogg","assets/audio/jump.mp3"]),this.load.audio("land",["assets/audio/land.ogg","assets/audio/land.mp3"]),this.load.audio("screams",["assets/audio/screams.ogg","assets/audio/screams.mp3"]),this.load.audio("jackpot",["assets/audio/payout.ogg","assets/audio/payout.mp3"]),this.load.audio("liftOff",["assets/audio/lift_off.ogg","assets/audio/lift_off.mp3"])},create:function(){this.preloadBar.cropEnabled=!1,this.game.load.onLoadComplete.add(this.loadComplete,this),this.game.load.start()},loadComplete:function(){this.game.time.events.add(1e3,this.mainMenu,this)},mainMenu:function(){this.game.state.start("MainMenu")},update:function(){}};